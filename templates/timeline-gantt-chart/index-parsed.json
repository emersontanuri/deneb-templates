{
    "data": {"name": "dataset"},
    "height": {"step": 30},
    "layer": [
      {
        "layer": [
          {
            "params": [
              {
                "name": "grid",
                "select": "interval",
                "bind": "scales"
              }
            ],
            "mark": {
              "type": "bar",
              "opacity": 0.6,
              "cornerRadius": 15
            },
            "encoding": {
              "color": {
                "field": "event",
                "scale": {
                  "range": [
                    "#624963",
                    "#FF3162",
                    "#10384F",
                    "#00BCFF",
                    "#004422",
                    "#89D329",
                    "#443247",
                    "#D30F4B",
                    "#000000",
                    "#4AC5BB",
                    "#F4D25A",
                    "#7F898A",
                    "#A4DDEE",
                    "#FDAB89",
                    "#B687AC",
                    "#28738A",
                    "#A78F8F",
                    "#168980",
                    "#293537",
                    "#BB4A4A",
                    "#B59525",
                    "#475052",
                    "#6A9FB0",
                    "#BD7150",
                    "#7B4F71",
                    "#1B4D5C",
                    "#706060",
                    "#0F5C55",
                    "#1C2325"
                  ]
                }
              }
            }
          }
        ],
        "encoding": {
          "x": {
            "field": "start_date",
            "type": "temporal",
            "axis": {
              "title": null,
              "grid": true,
              "gridColor": "black",
              "gridDash": [4, 4],
              "gridOpacity": {
                "condition": {
                  "test": {
                    "field": "value",
                    "timeUnit": "date",
                    "equal": 1
                  },
                  "value": 0.2
                },
                "value": 0
              },
              "format": "%Y/%b/%d"
            }
          },
          "y": {
            "field": "cohort_name",
            "type": "nominal",
            "axis": {
              "title": null,
              "grid": true,
              "tickBand": "extent"
            }
          },
          "x2": {"field": "end_date"},
          "yOffset": {"field": "type"}
        }
      },
      {
        "transform": [
          {
            "calculate": "now()",
            "as": "now_field"
          }
        ],
        "layer": [
          {
            "mark": {
              "type": "rule",
              "color": "#00BCFF",
              "size": 3
            },
            "encoding": {
              "x": {
                "field": "now_field",
                "type": "temporal"
              }
            }
          },
          {
            "mark": {
              "type": "text",
              "align": "left",
              "baseline": "bottom",
              "dx": 5,
              "opacity": 0.01
            },
            "encoding": {
              "text": {"value": "Today"},
              "x": {
                "field": "now_field",
                "type": "temporal"
              },
              "y": {"value": 20}
            }
          }
        ]
      }
    ]
  }